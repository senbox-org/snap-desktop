<!--
  ~ Copyright (C) 2010 Brockmann Consult GmbH (info@brockmann-consult.de)
  ~
  ~ This program is free software; you can redistribute it and/or modify it
  ~ under the terms of the GNU General Public License as published by the Free
  ~ Software Foundation; either version 3 of the License, or (at your option)
  ~ any later version.
  ~ This program is distributed in the hope that it will be useful, but WITHOUT
  ~ ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  ~ FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
  ~ more details.
  ~
  ~ You should have received a copy of the GNU General Public License along
  ~ with this program; if not, see http://www.gnu.org/licenses/
  -->

<html xmlns:background-color="http://www.w3.org/1999/xhtml">
<head>
    <title>Sentinel Toolbox Help - The Spectrum View</title>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <link rel="stylesheet" href="../style.css">
</head>

<body>
<table class="header">
    <tr class="header">
        <td class="header">&nbsp;
            The Spectrum View
        </td>
        <td class="header" align="right"><a href="../general/overview/SnapOverview.html"><img src="../images/snap_header.jpg"
                                                                                     border="0"></a></td>
    </tr>
</table>

<p>
    If you have opened a data product which contains spectral bands, you can use the spectrum view
    to inspect the spectra for a given pixel position. <br>
    A click on the
    <img src="images/icons/Spectrum24.gif" alt="Spectrum" border="0">
    icon in the <a href="Toolbars.html">main toolbar</a> or selecting &quot;Spectrum&quot;
    from the <a href="ToolWindows.html">View --> Tool Windows </a> menu opens a view which will look similar to this one:
</p>

<p align="center"><img src="images/SpectrumWindow.png"></p>

<p>
    If you now move the mouse cursor over an image view, the spectrum view will display the spectra
    for the current pixel position.
    Note that the spectrum view can only display the intensities of <i>spectral</i> bands.
    The spectrum view will remain empty for products without any spectral bands.
    By clicking <img src="images/icons/Filter24.gif"> you open the <a href="SpectrumChooser.html">Spectrum Chooser</a>
    which allows you to define which spectra or bands to show.
    You can also use the <a href="SpectrumChooser.html">Spectrum Chooser</a> to change the symbol and line style
    of a spectrum.
</p>

<p>
    You can click &amp; drag the mouse in the diagram in order to display the value of the selected spectrum graph
    at a pin position (see screenshot above).
</p>

<p>
    While you move the mouse cursor around a region in the image, you will notice that the diagram axes
    are automatically adjusted according to the min/max values of the displayed spectral band values.
</p>

<p class="inote">
    <b>Tip:</b> If you press the <code>SHIFT</code> key while moving the mouse cursor, the Sentinel Toolbox adjusts the axes to the local
    values at the current pixel position, if you release the <code>SHIFT</code> key again, then the min/max are accumulated
    again.
</p>

<h4>Context Menu</h4>

<p>A click with the right mouse button on the diagram brings up a context menu
    which consists of the following menu items:</p>
<ul>
    <li><b>Properties...</b><br>
        Edit several properties (colors, axes, etc.) of the diagram.<br>
        Use this menu to set the axis' ranges to fixed values.
    </li>
    <li><b>Copy</b><br>
        Copies the diagram as image into the clipboard. <br>
    </li>
    <li><b>Save As...</b><br>
        Save the diagram as image (PNG). <br>
    </li>
    <li><b>Print...</b><br>
        Print the diagram.<br>
    </li>
    <li><b>Zoom In</b><br>
        <ul>
            <li>Both Axes - Zoom in on both axes.</li>
            <li>Domain Axes - Zoom in only on the domain axis.</li>
            <li>Range Axes - Zoom in only on the range axis.</li>
        </ul>
    </li>
    <li><b>Zoom Out</b><br>
        <ul>
            <li>Both Axes - Zoom out on both axes.</li>
            <li>Domain Axes - Zoom out only on the domain axis.</li>
            <li>Range Axes - Zoom out only on the range axis.</li>
        </ul>
    </li>
    <li><b>Auto Range</b><br>
        <ul>
            <li>Both Axes - Adjusts both axes to the full data range.<br>
                This is similar to holding the <code>SHIFT</code> key pressed.
            </li>
            <li>Domain Axes - Adjusts the domain axis to the full data range.</li>
            <li>Range Axes - Adjusts the range axis to the full data range.</li>
        </ul>
    </li>
</ul>

<p>In the following the tool buttons of the spectrum view are explained.<br><br>

<table cellpadding=2 cellspacing=0 border=0>
    <tr>
        <td><img src="images/icons/Filter24.gif"></td>
        <td>Opens the <a href="SpectrumChooser.html">Spectrum Chooser</a>, which allows you to choose which spectra
        and bands to display and to alter their appearance.</td>
    </tr>
    <tr>
        <td><img src="images/icons/CursorSpectrum24.gif"></td>
        <td>Toggles the visibility of the cursor spectrum.</td>
    </tr>
    <tr>
        <td><img src="images/icons/SelectedPinSpectra24.gif"></td>
        <td>Toggles the visibility of the spectra of the selected pins.</td>
    </tr>
    <tr>
        <td><img src="images/icons/PinSpectra24.gif"></td>
        <td>Toggles the visibility of all pin spectra.</td>
    </tr>
    <tr>
        <td><img src="images/icons/SpectrumGrid24.gif"></td>
        <td>Switches the grid lines of the diagram on and off.</td>
    </tr>
    <tr>
        <td><img src="images/icons/Export24.gif"></td>
        <td>Exports the spectra to a <code>.csv</code> file.</td>
    </tr>
    <tr>
        <td><img src="images/icons/Help22.png"></td>
        <td>Displays this help page.</td>
    </tr>
</table>


<br>
<h4>Plot Range Fields</h4>
<pre>

&#8227; Set Bounds X-Axis:
        Sets bounds of x-axis (uses X-Axis Min and X-Axis Max)

&#8227; X-Axis Min:
        Sets minimum bound of x-axis (blank entry uses auto-bounding to data)

&#8227; X-Axis Max:
        Sets maximum bound of x-axis (blank entry uses auto-bounding to data)

&#8227; Set Bounds Y-Axis:
        Sets bounds of y-axis (uses Y-Axis Min and Y-Axis Max)

&#8227; Y-Axis Min:
        Sets minimum bound of y-axis (blank entry uses auto-bounding to data)

&#8227; Y-Axis Max:
        Sets maximum bound of y-axis (blank entry uses auto-bounding to data)

</pre>

<h4>System Performance Notes:</h4>

<p>
    SeaDAS tools can become quite bogged down and slow, when working with large files such as the
    NASA OB.DAAC PACE AOP Level-2 files (which are in NetCDF format, and are compressed,
    and contain hundreds of spectral band).  There are several options the user can explore to
    improve performance.
</p>

<ul>
    <li><b>Modify Tile Size (in Preferences)</b><br>
        Spectrum View processes the scene one tile at a time.<br><br>
        For example: if a scene size is 1000 pixels by 1000 pixels,
        and the tile size is 500 pixels (configurable in Preferences > Performance),
        then the scene would be divided into 4 tiles (500 pixels by 500 pixels) for processing.  Spectrum View would
        then only process the tiles marked for processing.
        <br><br>
        There are two Spectrum View modes to consider, pin mode and cursor mode.
        <br>
        <ul>
            <li>Pin Mode<br>
                Only the tiles which actually contain pins are processed.  Any tiles which do not contain pins are not processed.
                Therefore, if there are only a few pins, or there a groupings of pins which do not span the full scene,
                then setting tile size small can improve performance.
            </li>
            <li>Cursor Mode<br>
                Only the tile which is located at the mouse cursor hover position is processed.  Small tiles are nice if you
                plan to explore only a small section of the scene, but if you plan to move the cursor across all the image,
                then for small tiles, each new tile encountered will trigger a processing.  While processing of a tile is
                being done the cursor is ignored, however when processing of a tile is completed and the cursor has been moved
                to a different tile, then the new tile will be processed.  So in cursor mode, make sure to place cursor in your
                region of interest and then wait for processing to complete.
            </li>
        </ul>
    </li>

    <li><b>Modify File Compression</b><br>
        NASA OB.DAAC Level-2 files (which are in NetCDF format) are compressed files which is beneficial regarding file storage space.
        However, large compressed files can take longer to process within the Spectrum View.  One option to improve performance is to
        reduce the compression of the file.  <br>
        <ul>
            <li>Converting an existing level2 file<br>
                There are command line utilities for making an uncompressed copy of an existing level2 file.<br><br>
                <table><tr><td background-color: #e9f0f0;>
<pre>
nccopy -d 0 L2fileIn L2fileOut
</pre>
                </td></tr></table>
            </li>
            <li>Creating a new level2 file (L2gen)<br>
                You can create a new level-2 file from the level-1 files by using l2gen and including 'deflate=0' as one of the arguments.
            </li>
        </ul>


    </li>
</ul>



<hr>
</body>
</html>